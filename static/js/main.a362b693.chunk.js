(this["webpackJsonpdairydash-app"]=this["webpackJsonpdairydash-app"]||[]).push([[0],{124:function(e,t,s){},128:function(e,t,s){},129:function(e,t,s){},159:function(e,t,s){},160:function(e,t,s){"use strict";s.r(t);var a=s(2),c=s.n(a),n=s(36),r=s.n(n),i=s(8),l=(s(92),s(4)),o=s(6),d=s(10),b=s(9),j=s.n(b),u=s(1);function m(e){var t=e.color;return Object(u.jsxs)("svg",{viewBox:"0 0 100 25",xmlns:"http://www.w3.org/2000/svg",children:[Object(u.jsx)("text",{fill:t||"#0078F0",fontFamily:"Comfortaa, cursive",fontWeight:"700",textAnchor:"middle",fontSize:"16.1",x:"50",y:"15",children:"DairyDash"}),Object(u.jsx)("text",{fill:t||"#0078F0 ",fontFamily:"Montserrat, sans-serif",fontWeight:"500",textAnchor:"middle",fontSize:"3.5",letterSpacing:"1.75",x:"50",y:"23",children:"MILK DELIVERY PLATFORM"})]})}var x=s(47),O=s(7);function h(e){var t=e.options,s=e.setRegion,a=e.message;return Object(u.jsx)(x.a,{options:t,onChange:s,placeholder:"Region",styles:p,isSearchable:!1,components:{NoOptionsMessage:function(e){return Object(u.jsx)(O.l.NoOptionsMessage,Object(l.a)(Object(l.a)({},e),{},{children:a}))}}})}var p={control:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{transition:(t.isFocused,"0.4s"),border:t.isFocused?"2px solid #0078f0 !important":"2px solid #c1e0ff",paddingLeft:"0.74rem",paddingRight:"0.74rem",marginTop:"12px",height:"38px","&:hover":{border:"2px solid #7bbdff"},boxShadow:"none"})},placeholder:function(e,t){return{position:"absolute",fontWeight:"400",color:"#0078f0",top:t.isFocused?"-11px":"6px",left:t.isFocused?"8px":"0.74rem",fontSize:t.isFocused?"13.5px":"15px",backgroundColor:t.isFocused?"white":"",transition:(t.isFocused,"0.4s"),padding:t.isFocused?"0 4px":""}},dropdownIndicator:function(e,t){return{color:t.isFocused?"#0078f0 !important":"#c1e0ff","&:hover":{color:"#7bbdff"}}},menu:function(e){return Object(l.a)(Object(l.a)({},e),{},{boxShadow:"0px 2px 10px rgba(0, 55, 111, 0.3)"})},singleValue:function(e){return Object(l.a)(Object(l.a)({},e),{},{height:"46px",position:"absolute",top:"14px",left:"7px",textAlign:"left",padding:"0 3.5px",lineHeight:"1.3","&::before":{padding:"0 4px",content:"'Region'",display:"block",color:"#0078f0",fontSize:"13.5px",backgroundColor:"white",width:"min-content",transform:"translateX(-4px)"},backgroundColor:"transparent !important"})},input:function(){return{}},valueContainer:function(){return{}},indicatorsContainer:function(){return{}}},f=s.p+"static/media/van.f9898aff.svg",v=s.p+"static/media/shop.d00f512b.svg";s(124);function g(e){var t=e.loadingTime,s=e.loadingData,c=e.setLoadingData,n=e.status,r=e.setStatus,l=e.setRole,b=e.setData,x=Object(a.useState)(""),O=Object(o.a)(x,2),p=O[0],g=O[1],N=Object(a.useState)(""),y=Object(o.a)(N,2),w=y[0],k=y[1],S=Object(a.useState)(""),D=Object(o.a)(S,2),C=D[0],P=D[1],T=Object(a.useState)(""),F=Object(o.a)(T,2),E=F[0],L=F[1],R=Object(a.useState)(""),I=Object(o.a)(R,2),B=I[0],q=I[1],z=Object(a.useState)(""),U=Object(o.a)(z,2),H=U[0],A=U[1],M=Object(a.useState)([]),_=Object(o.a)(M,2),W=_[0],Y=_[1];Object(a.useEffect)((function(){var e=!0;return e&&(document.title="Sign Up as Distributor \u2013 DairyDash",j.a.get("/distributor/region").then((function(e){c(1);var t=e.data.map((function(e){return{value:e.name,label:e.name}}));Y(t)})).catch((function(e){console.error(e.response)}))),function(){e=!1}}),[]);return t?Object(u.jsxs)("div",{className:"splash splash-".concat(s>0?1:0),children:[Object(u.jsx)(m,{}),Object(u.jsx)("div",{className:"invisible mt-3",children:Object(u.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})]}):0===s?(setTimeout((function(){window.location.reload()}),1e4),Object(u.jsxs)("div",{className:"splash",children:[Object(u.jsx)(m,{}),Object(u.jsx)("div",{className:"fade-in mt-3",children:Object(u.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})]})):n?Object(u.jsx)(d.a,{to:"/"}):Object(u.jsxs)("div",{className:"auth fade-in",children:[Object(u.jsx)("div",{className:"login-title mb-3 pb-2 mx-auto",children:Object(u.jsx)(m,{})}),Object(u.jsx)("h4",{className:"dark-blue mb-3",children:"Sign Up as"}),Object(u.jsxs)("div",{className:"d-flex justify-content-center Comfortaa mb-3 pb-2",children:[Object(u.jsxs)("div",{className:"btn shadow-btn-active bg-blue mx-3",children:[Object(u.jsx)("img",{src:f,className:"mx-1 btn-icon pointer-events-none",alt:"Distributor"}),Object(u.jsx)("span",{className:"mx-1 align-middle",children:"Distributor"})]}),Object(u.jsxs)(i.b,{to:"/signup/retailer",draggable:"false",className:"btn shadow-btn dark-blue mx-3",children:[Object(u.jsx)("img",{src:v,className:"btn-icon pointer-events-none",alt:"Retailer"}),Object(u.jsx)("span",{className:"mx-1 align-middle",children:"Retailer"})]})]}),Object(u.jsxs)("div",{className:"light-bg form-container py-4 px-3",children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),B!==E?(console.error("Passwords mismatch!"),A("Those passwords didn\u2019t match! Try again...")):j.a.post("/distributor/signup",{phone:p,name:w,region:C.value,password:E}).then((function(e){console.log("POST request for distributor signup sent..."),e.data.alert?(console.log(e.data),A(e.data.alert)):e.data.auth?(b({did:e.data.result.insertId,phone:p,name:w,region:C.value,password:E}),r(!0),l(!0),localStorage.setItem("token",e.data.token)):(A("User already exists! Log in to continue..."),console.log(e.data.message),r(!1))})).catch((function(e){console.error(e.response),409===e.response.status&&A(e.response.data)}))},className:"form-group white-card mx-4 mt-3 mb-4 px-4 pt-1 pb-3",children:[Object(u.jsxs)("div",{className:"pt-3",children:[Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("input",{type:"tel",id:"phone",name:"phone",required:!0,title:"must be a valid 10 digit mobile number",pattern:"[5-9][0-9]{9}",onChange:function(e){g(e.target.value)},className:"form-control px-3 ".concat(p?"valid":"")}),Object(u.jsx)("label",{children:"Phone number"})]}),Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("input",{type:"text",id:"name",name:"name",required:!0,onChange:function(e){k(e.target.value)},className:"form-control px-3 mt-3"}),Object(u.jsx)("label",{children:"Full name"})]}),Object(u.jsx)(h,{options:W,setRegion:P,message:"All regions assigned with distributors!"}),Object(u.jsx)("input",{value:C,required:!0,className:"select-input",onChange:function(){}}),Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("input",{type:"password",id:"pass",name:"password",required:!0,pattern:"^.{8,}$",title:"must contain at least 8 or more characters",onChange:function(e){L(e.target.value)},className:"form-control px-3 ".concat(E?"valid":"")}),Object(u.jsx)("label",{children:"Password"})]}),Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("input",{type:"password",id:"confirm_pass",name:"confirm_password",required:!0,pattern:"^.{8,}$",title:"must contain at least 8 or more characters",onChange:function(e){q(e.target.value)},className:"form-control px-3 ".concat(B?"valid":"")}),Object(u.jsx)("label",{children:"Confirm Password"})]})]}),Object(u.jsxs)("small",{className:H?"warning":"invisible",children:[H,"\xa0"]}),Object(u.jsx)("div",{className:"mt-1 mb-2 field",children:Object(u.jsx)("button",{className:"btn button mx-auto d-block bg-blue",type:"submit",children:"Sign up"})})]}),Object(u.jsxs)("h5",{className:"text-center dark-blue-faded mb-2",children:["Already have an account?\xa0",Object(u.jsx)(i.b,{to:"/login/distributor",draggable:"false",className:"dark-blue text-decoration-none",children:"Log in"})]})]}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{})]})]})}function N(e){var t=e.loadingTime,s=e.loadingData,c=e.setLoadingData,n=e.status,r=e.setStatus,l=e.setRole,b=e.setData,x=Object(a.useState)(""),O=Object(o.a)(x,2),p=O[0],g=O[1],N=Object(a.useState)(""),y=Object(o.a)(N,2),w=y[0],k=y[1],S=Object(a.useState)(""),D=Object(o.a)(S,2),C=D[0],P=D[1],T=Object(a.useState)(""),F=Object(o.a)(T,2),E=F[0],L=F[1],R=Object(a.useState)(""),I=Object(o.a)(R,2),B=I[0],q=I[1],z=Object(a.useState)(""),U=Object(o.a)(z,2),H=U[0],A=U[1],M=Object(a.useState)([]),_=Object(o.a)(M,2),W=_[0],Y=_[1];Object(a.useEffect)((function(){var e=!0;return e&&(document.title="Sign Up as Retailer \u2013 DairyDash",j.a.get("/retailer/region").then((function(e){c(1);var t=e.data.map((function(e){return{value:e.region,label:e.region}}));Y(t)})).catch((function(e){console.error(e.response)}))),function(){e=!1}}),[]);return t?Object(u.jsxs)("div",{className:"splash splash-".concat(s>0?1:0),children:[Object(u.jsx)(m,{}),Object(u.jsx)("div",{className:"invisible mt-3",children:Object(u.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})]}):0===s?(setTimeout((function(){window.location.reload()}),1e4),Object(u.jsxs)("div",{className:"splash",children:[Object(u.jsx)(m,{}),Object(u.jsx)("div",{className:"fade-in mt-3",children:Object(u.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})]})):n?Object(u.jsx)(d.a,{to:"/"}):Object(u.jsxs)("div",{className:"auth fade-in",children:[Object(u.jsx)("div",{className:"login-title mb-3 pb-2 mx-auto",children:Object(u.jsx)(m,{})}),Object(u.jsx)("h4",{className:"dark-blue mb-3",children:"Sign Up as"}),Object(u.jsxs)("div",{className:"d-flex justify-content-center Comfortaa mb-3 pb-2",children:[Object(u.jsxs)(i.b,{to:"/signup/distributor",draggable:"false",className:"btn shadow-btn dark-blue mx-3",children:[Object(u.jsx)("img",{src:f,className:"mx-1 btn-icon pointer-events-none",alt:"Distributor"}),Object(u.jsx)("span",{className:"mx-1 align-middle",children:"Distributor"})]}),Object(u.jsxs)("div",{className:"btn shadow-btn-active bg-blue mx-3",children:[Object(u.jsx)("img",{src:v,className:"btn-icon pointer-events-none",alt:"Retailer"}),Object(u.jsx)("span",{className:"mx-1 align-middle",children:"Retailer"})]})]}),Object(u.jsxs)("div",{className:"light-bg form-container py-4 px-3",children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),B!==E?(console.error("Passwords mismatch!"),A("Those passwords didn\u2019t match. Try again!")):j.a.post("/retailer/signup",{phone:p,name:w,region:C.value,password:E}).then((function(e){console.log("POST request for retailer signup sent..."),e.data.alert?(console.log(e.data),A(e.data.alert)):e.data.auth?(b({rid:e.data.result.insertId,phone:p,name:w,region:C.value,password:E}),r(!0),l(!1),localStorage.setItem("token",e.data.token)):(A("User already exists! Log in to continue..."),console.log(e.data.message),r(!1))})).catch((function(e){console.error(e.response),409===e.response.status&&A(e.response.data)}))},className:"form-group white-card mx-4 mt-3 mb-4 px-4 pt-1 pb-3",children:[Object(u.jsxs)("div",{className:"pt-3",children:[Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("input",{type:"tel",id:"phone",name:"phone",required:!0,title:"must be a valid 10 digit mobile number",pattern:"[5-9][0-9]{9}",onChange:function(e){g(e.target.value)},className:"form-control px-3 ".concat(p?"valid":"")}),Object(u.jsx)("label",{children:"Phone number"})]}),Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("input",{type:"text",id:"name",name:"name",required:!0,onChange:function(e){k(e.target.value)},className:"form-control px-3 mt-3"}),Object(u.jsx)("label",{children:"Full name"})]}),Object(u.jsx)(h,{options:W,setRegion:P,message:"No regions assigned with distributors!"}),Object(u.jsx)("input",{value:C,required:!0,onChange:function(){},className:"select-input"}),Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("input",{type:"password",id:"pass",name:"password",required:!0,pattern:"^.{8,}$",title:"must contain at least 8 or more characters",onChange:function(e){L(e.target.value)},className:"form-control px-3 ".concat(E?"valid":"")}),Object(u.jsx)("label",{children:"Password"})]}),Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("input",{type:"password",id:"confirm_pass",name:"confirm_password",required:!0,pattern:"^.{8,}$",title:"must contain at least 8 or more characters",onChange:function(e){q(e.target.value)},className:"form-control px-3 ".concat(B?"valid":"")}),Object(u.jsx)("label",{children:"Confirm Password"})]})]}),Object(u.jsxs)("small",{className:H?"warning":"invisible",children:[H,"\xa0"]}),Object(u.jsx)("div",{className:"mt-1 mb-2 field",children:Object(u.jsx)("button",{className:"btn button mx-auto d-block bg-blue",type:"submit",children:"Sign up"})})]}),Object(u.jsxs)("h5",{className:"text-center dark-blue-faded mb-2",children:["Already have an account?\xa0",Object(u.jsx)(i.b,{to:"/login/retailer",draggable:"false",className:"dark-blue text-decoration-none",children:"Log in"})]})]}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{})]})]})}function y(e){var t=e.loadingTime,s=e.status,c=e.setStatus,n=e.setRole,r=e.setData,l=Object(a.useState)(""),b=Object(o.a)(l,2),x=b[0],O=b[1],h=Object(a.useState)(""),p=Object(o.a)(h,2),g=p[0],N=p[1],y=Object(a.useState)(""),w=Object(o.a)(y,2),k=w[0],S=w[1];Object(a.useEffect)((function(){document.title="Log In as Distributor \u2013 DairyDash"}),[]);return t?Object(u.jsx)("div",{className:"splash splash-1",children:Object(u.jsx)(m,{})}):s?Object(u.jsx)(d.a,{to:"/"}):Object(u.jsxs)("div",{className:"auth fade-in",children:[Object(u.jsx)("div",{className:"login-title mb-3 pb-2 mx-auto",children:Object(u.jsx)(m,{})}),Object(u.jsx)("h4",{className:"dark-blue mb-3",children:"Log In as"}),Object(u.jsxs)("div",{className:"d-flex justify-content-center Comfortaa mb-3 pb-2",children:[Object(u.jsxs)("div",{className:"btn shadow-btn-active bg-blue mx-3",children:[Object(u.jsx)("img",{src:f,className:"mx-1 btn-icon pointer-events-none",alt:"Distributor"}),Object(u.jsx)("span",{className:"mx-1 align-middle",children:"Distributor"})]}),Object(u.jsxs)(i.b,{to:"/login/retailer",draggable:"false",className:"btn shadow-btn dark-blue mx-3",children:[Object(u.jsx)("img",{src:v,className:"btn-icon pointer-events-none",alt:"Retailer"}),Object(u.jsx)("span",{className:"mx-1 align-middle",children:"Retailer"})]})]}),Object(u.jsxs)("div",{className:"light-bg form-container py-4 px-3",children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j.a.post("/distributor/login",{phone:x,password:g}).then((function(e){console.log("POST request for distributor login sent..."),e.data.auth?(S(""),console.log(e),r(e.data.result[0]),c(!0),n(!0),localStorage.setItem("token",e.data.token)):(S(e.data.message),console.log(e.data.message),c(!1))})).catch((function(e){console.error(e.response),401===e.response.status&&S(e.response.data)}))},className:"form-group white-card mx-4 mt-3 mb-4 px-4 pt-1 pb-3",children:[Object(u.jsxs)("div",{className:"pt-3",children:[Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("input",{type:"tel",id:"phone",name:"phone",required:!0,onChange:function(e){O(e.target.value)},className:"form-control px-3"}),Object(u.jsx)("label",{children:"Phone number"})]}),Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("input",{type:"password",id:"pass",name:"password",required:!0,onChange:function(e){N(e.target.value)},className:"form-control px-3 mt-4"}),Object(u.jsx)("label",{children:"Password"})]})]}),Object(u.jsxs)("small",{className:k?"warning":"invisible",children:[k,"\xa0"]}),Object(u.jsx)("div",{className:"mt-1 mb-2 field",children:Object(u.jsx)("button",{className:"btn button mx-auto d-block bg-blue",type:"submit",children:"Log in"})})]}),Object(u.jsxs)("h5",{className:"text-center dark-blue-faded mb-2",children:["Don't have an account?\xa0",Object(u.jsx)(i.b,{to:"/signup/distributor",draggable:"false",className:"dark-blue text-decoration-none",children:"Sign up"})]})]}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{})]})]})}function w(e){var t=e.loadingTime,s=e.status,c=e.setStatus,n=e.setRole,r=e.setData,l=Object(a.useState)(""),b=Object(o.a)(l,2),x=b[0],O=b[1],h=Object(a.useState)(""),p=Object(o.a)(h,2),g=p[0],N=p[1],y=Object(a.useState)(""),w=Object(o.a)(y,2),k=w[0],S=w[1];Object(a.useEffect)((function(){document.title="Log In as Retailer \u2013 DairyDash"}),[]);return t?Object(u.jsx)("div",{className:"splash splash-1",children:Object(u.jsx)(m,{})}):s?Object(u.jsx)(d.a,{to:"/"}):Object(u.jsxs)("div",{className:"auth fade-in",children:[Object(u.jsx)("div",{className:"login-title mb-3 pb-2 mx-auto",children:Object(u.jsx)(m,{})}),Object(u.jsx)("h4",{className:"dark-blue mb-3",children:"Log In as"}),Object(u.jsxs)("div",{className:"d-flex justify-content-center Comfortaa mb-3 pb-2",children:[Object(u.jsxs)(i.b,{to:"/login/distributor",draggable:"false",className:"btn shadow-btn dark-blue mx-3",children:[Object(u.jsx)("img",{src:f,className:"mx-1 btn-icon pointer-events-none",alt:"Distributor"}),Object(u.jsx)("span",{className:"mx-1 align-middle",children:"Distributor"})]}),Object(u.jsxs)("div",{className:"btn shadow-btn-active bg-blue mx-3",children:[Object(u.jsx)("img",{src:v,className:"btn-icon pointer-events-none",alt:"Retailer"}),Object(u.jsx)("span",{className:"mx-1 align-middle",children:"Retailer"})]})]}),Object(u.jsxs)("div",{className:"light-bg form-container py-4 px-3",children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j.a.post("/retailer/login",{phone:x,password:g}).then((function(e){console.log("POST request for retailer login sent..."),e.data.auth?(S(""),console.log(e),r(e.data.result[0]),c(!0),n(!1),localStorage.setItem("token",e.data.token)):(S(e.data.message),console.log(e.data.message),c(!1))})).catch((function(e){console.error(e.response),401===e.response.status&&S(e.response.data)}))},className:"form-group white-card mx-4 mt-3 mb-4 px-4 pt-1 pb-3",children:[Object(u.jsxs)("div",{className:"pt-3",children:[Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("input",{type:"tel",id:"phone",name:"phone",required:!0,onChange:function(e){O(e.target.value)},className:"form-control px-3"}),Object(u.jsx)("label",{children:"Phone number"})]}),Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("input",{type:"password",id:"pass",name:"password",required:!0,onChange:function(e){N(e.target.value)},className:"form-control px-3 mt-4"}),Object(u.jsx)("label",{children:"Password"})]})]}),Object(u.jsxs)("small",{className:k?"warning":"invisible",children:[k,"\xa0"]}),Object(u.jsx)("div",{className:"mt-1 mb-2 field",children:Object(u.jsx)("button",{className:"btn button mx-auto d-block bg-blue",type:"submit",children:"Log in"})})]}),Object(u.jsxs)("h5",{className:"text-center dark-blue-faded mb-2",children:["Don't have an account?\xa0",Object(u.jsx)(i.b,{to:"/signup/retailer",draggable:"false",className:"dark-blue text-decoration-none",children:"Sign up"})]})]}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{})]})]})}var k=s(13),S=s(11),D=s(41),C=(s(126),s(14));function P(e){var t=e.hour,s=e.products,c=e.retailerCount,n=e.orders,r=e.orderCount,l=e.deliveryHour,o=e.setDeliveryHour,d=e.data,b=e.socket,x=(e.update,e.setUpdate,n.length/s.length),O=n.length/s.length/c.total*100,h=c.ordered/c.total*100;Object(a.useEffect)((function(){document.title="".concat(t>=12?"Upcoming ":"","Delivery Summary \u2013 DairyDash")}));return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("h3",{className:"blue fade-in",children:[t>=12?"Upcoming ":"","Delivery Summary"]}),Object(u.jsxs)("div",{className:"flex-grow-1 d-flex flex-column justify-content-evenly fade-in",children:[Object(u.jsx)("div",{className:"chart-box mx-auto",children:Object(u.jsx)(D.a,{value:O,styles:Object(D.b)({pathColor:"#0080FF",trailColor:"white",pathTransitionDuration:.5}),children:Object(u.jsx)(D.a,{value:h,styles:Object(D.b)({pathColor:"#003163",trailColor:"transparent",pathTransitionDuration:.5}),children:Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{className:"m-0 order-items-number blue",children:x.toString()}),Object(u.jsxs)("h6",{className:"order-items-text mb-1",children:["retailer",1===x?"":"s"," confirmed"]}),Object(u.jsx)("h2",{className:"m-0 order-items-number dark-blue",children:c.ordered}),Object(u.jsxs)("h6",{className:"order-items-text",children:["retailer",1===c.ordered?"":"s"," ordered"]})]})})})}),Object(u.jsx)("div",{className:"items-container flex-fill px-2 pb-2",children:s.map((function(e,t){return Object(u.jsxs)("div",{className:"items-box white-card px-3 py-2 ".concat(e.name),children:[Object(u.jsx)("h6",{className:"m-0 text-truncate",children:e.name}),Object(u.jsx)("h3",{children:r[t+1]}),Object(u.jsxs)("p",{children:["pack",1===r[t+1]?"":"s"," for"]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("span",{children:c[t+1]})," retailer",1===c[t+1]?"":"s"]})]},e.pid)}))}),2===l||4===l?Object(u.jsx)("div",{className:"mt-3 mb-1",children:Object(u.jsx)("button",{className:"blue-btn btn button bg-blue px-4",onClick:function(e){e.preventDefault(),console.log("Ending the delivery..."),o(3),b.emit("delivery","Delivery status set for all orders"),j.a.post("/d".concat(d.did,"/end-delivery"),{region:d.region}).then((function(e){console.log(e.data.message),o(3)})).catch((function(e){console.error(e.response)}))},children:"End Delivery"})}):3===l?Object(u.jsx)("div",{className:"mt-3 mb-1",children:Object(u.jsx)("button",{className:"blue-btn btn button bg-blue px-4",onClick:function(e){e.preventDefault(),o(4)},children:"Previous Delivery"})}):Object(u.jsx)("div",{className:"mt-3 mb-2"})]}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"pb-4 mb-1 fade-in",children:[11===t?Object(u.jsxs)("small",{className:"d-block py-2 small-text",children:[Object(u.jsx)(C.a,{})," Finish your delivery before 12pm!"]}):2===l?Object(u.jsxs)("small",{className:"d-block py-2 small-text",children:[Object(u.jsx)(C.a,{}),' End Delivery will mark all pending deliveries as "Not Delivered"']}):Object(u.jsx)("small",{className:"d-block pt-1 pb-2 small-text invisible",children:"\xa0"}),Object(u.jsx)(i.b,{to:"/delivery",className:"dark-blue-btn btn bg-dark-blue py-2 pe-2 ps-3",children:Object(u.jsxs)("span",{children:[Object(u.jsx)("div",{children:"Show Delivery Details"}),Object(u.jsx)("div",{children:Object(u.jsx)(S.b,{size:"18px"})})]})})]}),Object(u.jsx)("div",{className:"footer-title mx-auto mb-2",children:Object(u.jsx)(m,{color:"#859BB0"})})]})]})}var T=s(29),F=s(40),E=s(85);function L(e){var t=e.orderDetail,s=e.socket,a=0,c=[],n=[{value:0,label:"Not Delivered"},{value:1,label:"Pending"},{value:2,label:"Delivered"}],r=2===t.isDelivered?n[2]:0===t.isDelivered?n[0]:n[1];return Object(u.jsx)(x.a,{options:[n[2],n[0]],styles:B,isSearchable:!1,defaultValue:r,onChange:function(e){a++,c.push(e.value);var n=0,r=setTimeout((function(){n=c.pop(),console.log(n),s.emit("delivery","Delivery status set for order "+t.oid),j.a.post("/d/o".concat(t.oid,"/delivery"),{value:n}).then((function(e){console.log(e.data.message)})).catch((function(e){console.error(e.response)})),a--}),5e3);1!==a&&clearTimeout(r),setTimeout((function(){a=0,c=[]}),5010)}})}var R=function(e,t){return"data:image/svg+xml,".concat(encodeURIComponent(Object(E.renderToStaticMarkup)(Object(a.createElement)(e,t))))},I=function(e,t){return Object(l.a)(Object(l.a)({},e),{},{fontWeight:"500",fontSize:"0.9rem",cursor:"pointer",transition:"0.15s",color:2===t.data.value?"#15bd15":0===t.data.value?"red":1===t.data.value?"#859BB0":"black",":before":{content:2===t.data.value?"url(".concat(R(T.b,{color:"#15bd15"}),")"):0===t.data.value?"url(".concat(R(T.c,{color:"red"}),")"):1===t.data.value?"url(".concat(R(F.a,{color:"#859BB0"}),")"):"",verticalAlign:"-12%",paddingRight:"0.3rem"},":hover":{transition:"0.15s",color:2===t.data.value?"#138513":0===t.data.value?"#b00000":1===t.data.value?"#566471":"black",":before":{content:2===t.data.value?"url(".concat(R(T.b,{color:"#138513"}),")"):0===t.data.value?"url(".concat(R(T.c,{color:"#b00000"}),")"):1===t.data.value?"url(".concat(R(F.a,{color:"#566471"}),")"):""}}})},B={control:function(e){return Object(l.a)(Object(l.a)({},e),{},{border:"none",boxShadow:"none",width:"9.1rem",minHeight:"1.9rem"})},indicatorsContainer:function(){return{display:"none"}},dropdownIndicator:function(){return{}},menu:function(e){return Object(l.a)(Object(l.a)({},e),{},{boxShadow:"0px 8px 20px rgba(0, 55, 111, 0.1)",border:"1px solid #c1e0ff",borderRadius:"15px",marginRight:"0",width:"10rem"})},option:function(e,t){return Object(l.a)(Object(l.a)({},I(e,t)),{},{background:"transparent",borderRadius:"15px",":active":{background:"transparent"}})},singleValue:function(e,t){return Object(l.a)(Object(l.a)({},I(e,t)),{},{margin:"0"})},valueContainer:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{justifyContent:"flex-end",padding:"0"})}},q=s(86);function z(e){var t=e.products,s=e.retailers,a=e.orderDetails,c=e.orders,n=e.orderCount,r=e.socket,l=e.hour,o=e.deliveryHour;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("h3",{className:"blue fade-in",children:[l>=12?"Upcoming ":"","Delivery Details"]}),Object(u.jsxs)("div",{className:"delivery-container flex-grow-1 fade-in",children:[Object(u.jsx)("div",{className:"product-chart-box",children:t.map((function(e,t){return Object(u.jsxs)("div",{className:"".concat(e.name," col"),children:[Object(u.jsx)("h6",{className:"m-0",children:e.name}),Object(u.jsx)("h3",{children:n[t+1]})]},e.pid)}))}),Object(u.jsx)("div",{className:"items-order-container pb-2",children:a.filter((function(e){return e.amount>0})).map((function(e,a){var n=s.filter((function(t){return t.rid===e.rid}))[0];return Object(u.jsxs)("div",{className:"stores-order-box bg-white py-2 px-3 m-2",children:[Object(u.jsxs)("div",{className:"d-flex justify-content-between align-items-end overflow-hidden",children:[Object(u.jsxs)("div",{className:"pt-1",children:[Object(u.jsxs)("h5",{className:"store-name dark-blue text-start collapsed","data-toggle":"collapse",href:"#collapse-".concat(a),role:"button","aria-expanded":"false","aria-controls":"collapse-".concat(a),children:[Object(u.jsx)(S.b,{className:"arrow-forward"}),Object(u.jsx)(S.a,{className:"arrow-down"}),n.name]}),Object(u.jsx)("div",{className:"collapse text-start px-3",id:"collapse-".concat(a),children:Object(u.jsxs)("a",{href:"tel:".concat(n.phone),className:"store-call dark-blue",children:[Object(u.jsx)(S.c,{}),n.phone]})})]}),Object(u.jsxs)("h3",{className:"fw-bolder dark-blue m-0 px-1 bg-white rounded",children:["\u20b9",e.amount.toFixed(2)]})]}),Object(u.jsxs)("div",{className:"ps-2 pe-1 py-1 d-flex justify-content-between",children:[Object(u.jsx)("div",{className:"d-flex me-2",children:t.length>0?c.filter((function(t){return t.oid===e.oid})).map((function(e,s){return Object(u.jsxs)("div",{className:"d-inline-block pe-2 ps-1 d-flex align-items-center ".concat(t[s].name),children:[Object(u.jsx)(q.a,{size:"15px"}),"\xa0",Object(u.jsx)("h3",{className:"m-0 fw-bolder d-inline-block",children:e.count})]},e.pid)})):Object(u.jsx)(u.Fragment,{})}),1===o||2===o||4===o?Object(u.jsx)(L,{orderDetail:e,socket:r}):Object(u.jsxs)("small",{className:"d-block py-2 small-text",children:[Object(u.jsx)(C.a,{})," Not delivery hours!"]})]})]},e.oid)}))})]}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"pb-4 mb-1 fade-in",children:[Object(u.jsxs)("small",{className:"d-block py-2 small-text".concat(11===l?"":" invisible"),children:[Object(u.jsx)(C.a,{})," Finish your delivery before 12pm!"]}),Object(u.jsx)(i.b,{to:"/",className:"dark-blue-btn btn bg-dark-blue py-2 pe-2 ps-3",children:Object(u.jsxs)("span",{children:[Object(u.jsx)("div",{children:"Show Delivery Summary"}),Object(u.jsx)("div",{children:Object(u.jsx)(S.b,{size:"18px"})})]})})]}),Object(u.jsx)("div",{className:"footer-title mx-auto mb-2",children:Object(u.jsx)(m,{color:"#859BB0"})})]})]})}s(128);var U=s.p+"static/media/hamburger.e8355311.svg";function H(e){var t=e.loadingTime,s=e.loadingData,c=e.setLoadingData,n=e.socket,r=e.hour,i=e.status,b=e.data,x=e.setHour,O=Object(a.useState)([]),h=Object(o.a)(O,2),p=h[0],f=h[1],v=Object(a.useState)([]),g=Object(o.a)(v,2),N=g[0],y=g[1],w=Object(a.useState)({}),S=Object(o.a)(w,2),D=S[0],C=S[1],T=Object(a.useState)([]),F=Object(o.a)(T,2),E=F[0],L=F[1],R=Object(a.useState)([]),I=Object(o.a)(R,2),B=I[0],q=I[1],H=Object(a.useState)([]),A=Object(o.a)(H,2),M=A[0],_=A[1],W=Object(a.useState)([]),Y=Object(o.a)(W,2),V=Y[0],K=Y[1],$=Object(a.useState)([]),J=Object(o.a)($,2),X=J[0],G=J[1],Q=Object(a.useState)([]),Z=Object(o.a)(Q,2),ee=Z[0],te=Z[1],se=Object(a.useState)({total:0}),ae=Object(o.a)(se,2),ce=ae[0],ne=ae[1],re=Object(a.useState)(!1),ie=Object(o.a)(re,2),le=ie[0],oe=ie[1],de=Object(a.useState)(0),be=Object(o.a)(de,2),je=be[0],ue=be[1];Object(a.useEffect)((function(){var e=!0;return e&&n.on("order",(function(e){console.log(e),setTimeout((function(){oe(!le)}))})),function(){e=!1,n.off("order")}})),Object(a.useEffect)((function(){var e=!0;return e&&(j.a.get("/".concat(b.did,"/products")).then((function(e){c(s++),f(e.data)})).catch((function(e){console.error(e.response)})),j.a.get("/d".concat(b.did,"/status")).then((function(e){c(s++),C((function(t){return Object(l.a)(Object(l.a)({},t),{},{total:e.data.retailers.length})})),y(e.data.retailers),L(e.data.prevOrderDetails),q(e.data.prevOrders),_(e.data.curOrderDetails),K(e.data.curOrders)})).catch((function(e){console.error(e.response)}))),function(){e=!1}}),[b,le]),Object(a.useEffect)((function(){r<12?r<7?(console.log("Delivery hour started!"),ue(1)):E.length>0&&(E.filter((function(e){return null===e.isDelivered})).length>0?(console.log("It is Delivery Hours!"),ue(2)):(console.log("Delivery has finished!"),4!==je&&ue(3),2===je&&ue(3))):(console.log("Not Delivery Hours!"),ue(0))}),[r,E,M,V,B]),Object(a.useEffect)((function(){0===je||3===je?(G(M),te(V)):1!==je&&2!==je&&4!==je||(G(E),te(B))}),[M,V,je,E,B]),Object(a.useEffect)((function(){console.log(je)}),[je]),Object(a.useEffect)((function(){if(p.map((function(e){return ne((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(k.a)({},e.pid,0))})),C((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(k.a)({},e.pid,0))}))})),ee.length>0){var e=ee.reduce((function(e,t){return e+t.count}),0);ne((function(t){return Object(l.a)(Object(l.a)({},t),{},{total:e})})),ee.map((function(e){return ne((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(k.a)({},e.pid,t[e.pid]+e.count))})),C((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(k.a)({},e.pid,t[e.pid]+(e.count>0)))}))}))}}),[ee,p]),Object(a.useEffect)((function(){C((function(e){return Object(l.a)(Object(l.a)({},e),{},{ordered:X.filter((function(e){return e.amount>0})).length})}))}),[X]);var me={products:p,retailers:N,retailerCount:D,orderDetails:X,orders:ee,orderCount:ce,socket:n,hour:r,deliveryHour:je,setDeliveryHour:ue,setHour:x,data:b,update:le,setUpdate:oe};return t?Object(u.jsxs)("div",{className:"splash splash-".concat(s>0?1:0),children:[Object(u.jsx)(m,{}),Object(u.jsx)("div",{className:"invisible mt-3",children:Object(u.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})]}):0===s?(setTimeout((function(){window.location.reload()}),1e4),Object(u.jsxs)("div",{className:"splash",children:[Object(u.jsx)(m,{}),Object(u.jsx)("div",{className:"fade-in mt-3",children:Object(u.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})]})):i?Object(u.jsxs)("div",{className:"home fade-in",children:[Object(u.jsxs)("div",{className:"title-head",children:[Object(u.jsxs)("div",{className:"user-title",children:[Object(u.jsx)("h3",{className:"dark-blue Comfortaa text-truncate",children:b.name}),Object(u.jsx)("h6",{className:"dark-blue-faded text-truncate",children:b.region})]}),Object(u.jsxs)("div",{className:"dropdown",children:[Object(u.jsx)("button",{className:"btn dropdown-toggle p-2",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:Object(u.jsx)("img",{src:U,alt:"Menu"})}),Object(u.jsx)("div",{className:"dropdown-menu dropdown-menu-right white-card shadow-btn","aria-labelledby":"dropdownMenuButton",children:Object(u.jsx)("div",{className:"d-flex flex-column align-items-center",children:Object(u.jsx)("a",{href:"/login/distributor",onClick:function(){localStorage.clear()},className:"w-100 text-center text-decoration-none",children:"Log out"})})})]})]}),Object(u.jsx)("div",{className:"light-bg center-container pt-4 px-2 flex-fill",children:Object(u.jsxs)(d.d,{children:[Object(u.jsx)(d.b,{path:"/",exact:!0,children:Object(u.jsx)(P,Object(l.a)({},me))}),Object(u.jsx)(d.b,{path:"/delivery",exact:!0,children:Object(u.jsx)(z,Object(l.a)({},me))}),Object(u.jsx)(d.b,{path:"/deliver*",children:Object(u.jsx)(d.a,{to:"/delivery"})}),Object(u.jsx)(d.b,{path:"*",children:Object(u.jsx)(d.a,{to:"/"})})]})})]}):Object(u.jsx)(d.a,{to:"/"})}function A(e){var t=e.distributor,s=e.previous,c=e.isPlaced,n=e.setIsPlaced,r=e.hour;return Object(a.useEffect)((function(){document.title="Previous Order Summary \u2013 DairyDash"}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{className:"blue fade-in",children:"Previous Order Summary"}),s.result?Object(u.jsxs)("div",{className:"flex-grow-1 d-flex flex-column justify-content-evenly fade-in",children:[Object(u.jsx)("div",{className:"my-1",children:2===s.isDelivered?Object(u.jsxs)("div",{children:[Object(u.jsx)(T.b,{size:"130px",className:"green py-1"}),Object(u.jsx)("h3",{className:"green pb-1",children:"Delivered"}),Object(u.jsxs)("h5",{className:"dark-blue p-1 my-1",children:["Your order has been delivered by ",t.name]})]}):0===s.isDelivered?Object(u.jsxs)("div",{children:[Object(u.jsx)(T.c,{size:"130px",className:"red py-1"}),Object(u.jsx)("h3",{className:"red pb-1",children:"Not Delivered"}),Object(u.jsxs)("h5",{className:"dark-blue p-1 my-1",children:["Your order could not be delivered by ",t.name]})]}):Object(u.jsxs)("div",{children:[Object(u.jsx)(F.a,{size:"150px",className:"dark-blue-faded py-1"}),Object(u.jsx)("h3",{className:"dark-blue-faded pb-1",children:"Pending"}),Object(u.jsxs)("h5",{className:"dark-blue p-1 my-1",children:["Your order is yet to be delivered by ",t.name]})]})}),Object(u.jsx)("div",{className:"items-container px-2 pb-4",children:s.result.map((function(e){return Object(u.jsxs)("div",{className:"items-box white-card ".concat(e.name," px-2 py-2"),children:[Object(u.jsx)("h6",{className:"m-0 text-truncate",children:e.name}),Object(u.jsx)("h3",{children:e.count}),Object(u.jsxs)("p",{children:["pack",1===e.count?"":"s"]})]},e.pid)}))}),Object(u.jsxs)("h5",{className:"text-center dark-blue-faded px-1",children:["Haven\u2019t received your order?",Object(u.jsx)("br",{}),Object(u.jsx)("a",{href:"tel:".concat(t.phone),className:"dark-blue call",children:"Call distributor"})]})]}):Object(u.jsxs)("div",{className:"flex-grow-1 d-flex flex-column justify-content-center mb-5 fade-in",children:[Object(u.jsx)("div",{className:"my-1 py-1",children:Object(u.jsx)(T.a,{size:"130px",className:"dark-blue-faded py-1"})}),Object(u.jsx)("h5",{className:"dark-blue p-1 my-1",children:"No previous orders exists!"}),Object(u.jsxs)("h5",{className:"text-center dark-blue-faded px-1 py-2",children:["Have any queries for your distributor?",Object(u.jsx)("br",{}),Object(u.jsx)("a",{href:"tel: ".concat(t.phone),className:"dark-blue call",children:"Call distributor"})]})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"pb-4 mb-1 fade-in",children:0===c?Object(u.jsxs)(u.Fragment,{children:[18===r?Object(u.jsxs)("small",{className:"d-block py-2 small-text",children:[Object(u.jsx)(C.a,{})," Place your order before 7pm!"]}):r>=19||r<7?Object(u.jsxs)("small",{className:"d-block py-2 small-text",children:[Object(u.jsx)(C.a,{})," Order can't be placed until after 7am!"]}):Object(u.jsx)("small",{className:"d-block py-2 small-text invisible",children:"\xa0"}),Object(u.jsx)(i.b,{to:"/order",onClick:function(){2===c&&n(1)},className:"dark-blue-btn btn bg-dark-blue py-2 pe-2 ps-3 \n                                ".concat(r>=19||r<7?" disabled":""),children:Object(u.jsxs)("span",{children:[Object(u.jsx)("div",{children:"Place Next Order"}),Object(u.jsx)("div",{children:Object(u.jsx)(S.b,{size:"18px"})})]})})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("small",{className:"d-block py-2 small-text invisible",children:"\xa0"}),Object(u.jsx)(i.b,{to:"/order",onClick:function(){2===c&&n(1)},className:"dark-blue-btn btn bg-dark-blue py-2 pe-2 ps-3",children:Object(u.jsxs)("span",{children:[Object(u.jsx)("div",{children:"Show Current Order"}),Object(u.jsx)("div",{children:Object(u.jsx)(S.b,{size:"18px"})})]})})]})}),Object(u.jsx)("div",{className:"footer-title mx-auto mb-2",children:Object(u.jsx)(m,{color:"#859BB0"})})]})]})}function M(e){var t=e.data,s=e.products,c=e.count,n=e.setCount,r=e.price,d=e.setPrice,b=e.isPlaced,x=e.setIsPlaced,O=e.order,h=e.previous,p=e.socket,f=(e.hour,Object(a.useState)("")),v=Object(o.a)(f,2),g=v[0],N=v[1];Object(a.useEffect)((function(){document.title=0===b?"Place Upcoming Order \u2013 DairyDash":"Edit Current Order \u2013 DairyDash"}),[]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{className:"blue fade-in",children:0===b?"Place Upcoming Order":"Edit Current Order"}),Object(u.jsxs)("div",{className:"flex-grow-1 d-flex flex-column justify-content-evenly fade-in",children:[Object(u.jsx)("div",{className:"items-order-container",children:s.map((function(e){return Object(u.jsxs)("div",{className:"items-order-box bg-white my-2 py-2",children:[Object(u.jsx)("h4",{className:"mb-2 "+e.name,children:e.name}),Object(u.jsxs)("div",{className:"items-button-box mb-1",children:[Object(u.jsx)("button",{className:"btn button bg-blue p-0 bg-"+e.name.replaceAll(" ",""),onClick:function(){c[e.pid]>0&&(n((function(t){var s;return Object(l.a)(Object(l.a)({},t),{},(s={},Object(k.a)(s,e.pid,t[e.pid]-1),Object(k.a)(s,"total",t.total-1),s))})),d((function(t){return Object(l.a)(Object(l.a)({},t),{},{total:t.total-e.price})})))},children:Object(u.jsx)("h4",{children:"-"})}),Object(u.jsx)("h3",{className:"my-0 mx-2 px-1 py-1 border-"+e.name.replaceAll(" ",""),children:c[e.pid]}),Object(u.jsx)("button",{className:"btn button bg-blue p-0 bg-"+e.name.replaceAll(" ",""),onClick:function(){n((function(t){var s;return Object(l.a)(Object(l.a)({},t),{},(s={},Object(k.a)(s,e.pid,t[e.pid]+1),Object(k.a)(s,"total",t.total+1),s))})),d((function(t){return Object(l.a)(Object(l.a)({},t),{},{total:t.total+e.price})}))},children:Object(u.jsx)("h4",{children:"+"})})]})]},e.pid)}))}),Object(u.jsx)("h5",{className:"total-text my-1",children:"Total"}),Object(u.jsx)("div",{children:Object(u.jsxs)("h3",{className:"m-0 fw-normal dark-blue",children:["\u20b9",r.total.toFixed(2)]})}),Object(u.jsx)("div",{className:"mt-1 mb-2",children:Object(u.jsx)("button",{className:"blue-btn btn button bg-blue px-4",onClick:function(e){e.preventDefault(),p.emit("order","Order request by "+t.rid),j.a.post("/r".concat(t.rid,"/order").concat(2===b?"/edit":""),{count:c,price:r,rid:t.rid,prevOrder:O||s}).then((function(e){console.log("Retailer order sent..."),console.log(e.data.message),x(e.data.isPlaced)})).catch((function(e){console.error(e.response.data),N(e.response.data)}))},children:"Confirm"})})]}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"pb-4 mb-1 fade-in",children:[Object(u.jsxs)("small",{className:"d-block py-2 small-text".concat(g?"":" invisible"),children:[Object(u.jsx)(C.a,{})," ",g]}),h?Object(u.jsx)(i.b,{to:"/",className:"dark-blue-btn btn bg-dark-blue py-2 pe-2 ps-3",children:Object(u.jsxs)("span",{children:[Object(u.jsx)("div",{children:"Show Previous Order"}),Object(u.jsx)("div",{children:Object(u.jsx)(S.b,{size:"18px"})})]})}):Object(u.jsx)("button",{className:"dark-blue-btn btn bg-dark-blue py-2 pe-2 ps-3",type:"submit",onClick:function(){x(1)},children:Object(u.jsxs)("span",{children:[Object(u.jsx)("div",{children:"Show Current Order"}),Object(u.jsx)("div",{children:Object(u.jsx)(S.b,{size:"18px"})})]})})]}),Object(u.jsx)("div",{className:"footer-title mx-auto mb-2",children:Object(u.jsx)(m,{color:"#859BB0"})})]})]})}function _(e){var t=e.hour,s=e.order,c=e.products,n=e.count,r=e.isPlaced,l=e.setIsPlaced;return Object(a.useEffect)((function(){document.title="Current Order Summary \u2013 DairyDash"}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{className:"blue fade-in",children:"Current Order Summary"}),Object(u.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-evenly fade-in",children:Object(u.jsx)("div",{className:"items-order-container",children:s&&1===r?s.map((function(e){return Object(u.jsxs)("div",{className:"items-order-box bg-white my-2 pt-2 pb-3",children:[Object(u.jsx)("h4",{className:"m-1 "+e.name,children:e.name}),Object(u.jsx)("h3",{className:"my-0 mx-2 px-1 py-1 "+e.name,children:e.count})]},e.pid)})):c.map((function(e,t){return Object(u.jsxs)("div",{className:"items-order-box bg-white my-2 pt-2 pb-3",children:[Object(u.jsx)("h4",{className:"m-1 "+e.name,children:e.name}),Object(u.jsx)("h3",{className:"my-0 mx-2 px-1 py-1 "+e.name,children:n[t+1]})]},e.pid)}))})}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"pb-4 mb-1 fade-in",children:1===r&&t<19&&t>=7?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("small",{className:"d-block py-2 small-text",children:[Object(u.jsx)(C.a,{})," Your order can be edited once before 7pm!"]}),Object(u.jsx)("button",{className:"dark-blue-btn btn bg-dark-blue py-2 pe-2 ps-3",type:"submit",onClick:function(){l(2)},children:Object(u.jsxs)("span",{children:[Object(u.jsx)("div",{children:"Edit Current Order"}),Object(u.jsx)("div",{children:Object(u.jsx)(S.b,{size:"18px"})})]})})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("small",{className:"d-block py-2 small-text",children:[Object(u.jsx)(C.a,{}),3===r?" Your order has already been edited!":t>=19||t<7?" Your order can't be edited anymore!":""]}),Object(u.jsx)(i.b,{to:"/",className:"dark-blue-btn btn bg-dark-blue py-2 pe-2 ps-3",type:"submit",children:Object(u.jsxs)("span",{children:[Object(u.jsx)("div",{children:"Show Previous Order"}),Object(u.jsx)("div",{children:Object(u.jsx)(S.b,{size:"18px"})})]})})]})}),Object(u.jsx)("div",{className:"footer-title mx-auto mb-2",children:Object(u.jsx)(m,{color:"#859BB0"})})]})]})}s(129);function W(e){var t=e.loadingTime,s=e.loadingData,c=e.setLoadingData,n=e.status,r=e.data,i=e.socket,b=e.hour,x=Object(a.useState)([]),O=Object(o.a)(x,2),h=O[0],p=O[1],f=Object(a.useState)([]),v=Object(o.a)(f,2),g=v[0],N=v[1],y=Object(a.useState)([]),w=Object(o.a)(y,2),S=w[0],D=w[1],C=Object(a.useState)({total:0}),P=Object(o.a)(C,2),T=P[0],F=P[1],E=Object(a.useState)({total:0}),L=Object(o.a)(E,2),R=L[0],I=L[1],B=Object(a.useState)(0),q=Object(o.a)(B,2),z=q[0],H=q[1],W=Object(a.useState)([]),Y=Object(o.a)(W,2),V=Y[0],K=Y[1],$=Object(a.useState)(!1),J=Object(o.a)($,2),X=J[0],G=J[1];Object(a.useEffect)((function(){var e=!0;return e&&i.on("delivery",(function(e){console.log(e),setTimeout((function(){G(!X)}))})),function(){e=!1}})),Object(a.useEffect)((function(){var e=!0;return e&&(j.a.get("/".concat(r.rid,"/products")).then((function(e){c(s++),p(e.data)})).catch((function(e){console.error(e.response)})),j.a.get("/r".concat(r.rid,"/status")).then((function(e){c(s++),H(e.data.isPlaced),K(e.data.result)})).catch((function(e){console.error(e.response)})),j.a.get("/r".concat(r.rid,"/previous")).then((function(e){c(s++),D(e.data)})).catch((function(e){console.error(e.response)})),j.a.get("/r".concat(r.rid,"/distributor")).then((function(e){c(s++),N(e.data[0])})).catch((function(e){console.error(e.response)}))),function(){e=!1}}),[X]),Object(a.useEffect)((function(){h.map((function(e){return F((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(k.a)({},e.pid,0))}))}))}),[h]),Object(a.useEffect)((function(){h.map((function(e){return I((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(k.a)({},e.pid,T[e.pid]*e.price))}))}))}),[T]);var Q={data:r,products:h,distributor:g,previous:S,count:T,setCount:F,price:R,setPrice:I,order:V,isPlaced:z,setIsPlaced:H,socket:i,hour:b};return t?Object(u.jsxs)("div",{className:"splash splash-".concat(s>0?1:0),children:[Object(u.jsx)(m,{}),Object(u.jsx)("div",{className:"invisible mt-3",children:Object(u.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})]}):0===s?(setTimeout((function(){window.location.reload()}),1e4),Object(u.jsxs)("div",{className:"splash",children:[Object(u.jsx)(m,{}),Object(u.jsx)("div",{className:"fade-in mt-3",children:Object(u.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})]})):n?Object(u.jsxs)("div",{className:"home fade-in",children:[Object(u.jsxs)("div",{className:"title-head",children:[Object(u.jsxs)("div",{className:"user-title",children:[Object(u.jsx)("h3",{className:"dark-blue Comfortaa text-truncate",children:r.name}),Object(u.jsx)("h6",{className:"dark-blue-faded text-truncate",children:r.region})]}),Object(u.jsxs)("div",{className:"dropdown",children:[Object(u.jsx)("button",{className:"btn dropdown-toggle p-2",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:Object(u.jsx)("img",{src:U,alt:"Menu"})}),Object(u.jsx)("div",{className:"dropdown-menu dropdown-menu-right white-card shadow-btn","aria-labelledby":"dropdownMenuButton",children:Object(u.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(u.jsx)("a",{href:"tel:".concat(g.phone),className:"w-100 text-center text-decoration-none my-1",children:"Call Distributor"}),Object(u.jsx)("a",{href:"/login/retailer",onClick:function(){localStorage.clear()},className:"w-100 text-center text-decoration-none my-1",children:"Log out"})]})})]})]}),Object(u.jsx)("div",{className:"light-bg center-container pt-4 px-2 flex-fill",children:Object(u.jsxs)(d.d,{children:[Object(u.jsx)(d.b,{path:"/",exact:!0,children:Object(u.jsx)(A,Object(l.a)({},Q))}),Object(u.jsx)(d.b,{path:"/order",exact:!0,children:0===z||2===z?b<19&&b>=7?Object(u.jsx)(M,Object(l.a)({},Q)):Object(u.jsx)(d.a,{to:"/"}):1===z||3===z?Object(u.jsx)(_,Object(l.a)({},Q)):Object(u.jsx)(d.a,{to:"/"})}),Object(u.jsx)(d.b,{path:"*",children:Object(u.jsx)(d.a,{to:"/"})})]})})]}):Object(u.jsx)(d.a,{to:"/"})}var Y=s(87),V=(s(159),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).serverURL||"http://localhost:4000");j.a.defaults.baseURL=V;var K=Object(Y.io)(V);function $(){var e=Object(a.useState)(!0),t=Object(o.a)(e,2),s=t[0],c=t[1],n=Object(a.useState)(0),r=Object(o.a)(n,2),i=r[0],b=r[1],m=Object(a.useState)(!1),x=Object(o.a)(m,2),O=x[0],h=x[1],p=Object(a.useState)(!0),f=Object(o.a)(p,2),v=f[0],k=f[1],S=Object(a.useState)({}),D=Object(o.a)(S,2),C=D[0],P=D[1],T=Object(a.useState)(12),F=Object(o.a)(T,2),E=F[0],L=F[1];Object(a.useEffect)((function(){setTimeout((function(){c(!1)}),2e3),j.a.get("/status",{headers:{"access-token":localStorage.getItem("token")}}).then((function(e){console.log(e.data.hour),L(e.data.hour),e.data.auth&&(h(!0),P(e.data.user),e.data.user.did?k(!0):e.data.user.rid&&k(!1))})).catch((function(e){console.error(e.response),h(!1)}))}),[]);var R={loadingTime:s,loadingData:i,setLoadingData:b,socket:K,hour:E,status:O,role:v,data:C,setHour:L,setStatus:h,setRole:k,setData:P};return Object(u.jsx)("div",{className:"Container",children:Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)(d.d,{children:[O?v?Object(u.jsx)(d.b,{path:"/",children:Object(u.jsx)(H,Object(l.a)({},R))}):Object(u.jsx)(d.b,{path:"/",children:Object(u.jsx)(W,Object(l.a)({},R))}):Object(u.jsxs)(d.d,{children:[Object(u.jsx)(d.b,{path:"/",exact:!0,children:Object(u.jsx)(g,Object(l.a)({},R))}),Object(u.jsx)(d.b,{path:"/signup/distributor",exact:!0,children:Object(u.jsx)(g,Object(l.a)({},R))}),Object(u.jsx)(d.b,{path:"/signup/retailer",exact:!0,children:Object(u.jsx)(N,Object(l.a)({},R))}),Object(u.jsx)(d.b,{path:"/login/distributor",exact:!0,children:Object(u.jsx)(y,Object(l.a)({},R))}),Object(u.jsx)(d.b,{path:"/login/retailer",exact:!0,children:Object(u.jsx)(w,Object(l.a)({},R))}),Object(u.jsx)(d.b,{path:"*",children:Object(u.jsx)(d.a,{to:"/"})})]}),Object(u.jsx)(d.b,{path:"*",children:Object(u.jsx)(d.a,{to:"/"})})]})})})}K.on("connection");var J=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,161)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,r=t.getTTFB;s(e),a(e),c(e),n(e),r(e)}))};r.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(i.a,{children:Object(u.jsx)($,{})})}),document.getElementById("root")),J()},92:function(e,t,s){}},[[160,1,2]]]);
//# sourceMappingURL=main.a362b693.chunk.js.map